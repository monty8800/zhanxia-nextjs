name = "zhanxia-nextjs"
main = ".open-next/worker.js"
compatibility_date = "2024-12-29"
compatibility_flags = ["nodejs_compat"]

[assets]
directory = ".open-next/assets"
binding = "ASSETS"

# Durable Objects 配置
[[durable_objects.bindings]]
name = "DO_QUEUE_HANDLER"
class_name = "DOQueueHandler"
script_name = "zhanxia-nextjs"

[[durable_objects.bindings]]
name = "DO_SHARDED_TAG_CACHE"
class_name = "DOShardedTagCache"
script_name = "zhanxia-nextjs"

[[durable_objects.bindings]]
name = "BUCKET_CACHE_PURGE"
class_name = "BucketCachePurge"
script_name = "zhanxia-nextjs"

# R2 存储桶配置
[[r2_buckets]]
binding = "NEXT_INC_CACHE_R2_BUCKET"
bucket_name = "cache"

# 环境变量（在 Cloudflare Dashboard 中配置）
# NEXT_PUBLIC_SUPABASE_URL
# NEXT_PUBLIC_SUPABASE_ANON_KEY
# NEXT_PUBLIC_GTM_ID
