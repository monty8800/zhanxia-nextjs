(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,80045,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(20755),s=e.i(18566),l=e.i(22016);function d(){let e=(0,s.useRouter)(),d=(0,s.useParams)().id,[n,o]=(0,r.useState)(!0),[i,c]=(0,r.useState)(!1),[u,g]=(0,r.useState)({content:"",author:"",status:"已发布",sort_order:"0"});(0,r.useEffect)(()=>{x()},[d]);let x=async()=>{try{let e=(0,a.createClient)(),{data:t,error:r}=await e.from("testimonials").select("*").eq("id",d).single();if(r)throw r;g({content:t.content,author:t.author,status:t.status,sort_order:t.sort_order.toString()})}catch(t){alert("加载失败："+(t instanceof Error?t.message:"未知错误")),e.push("/admin/testimonials")}finally{o(!1)}},m=async t=>{t.preventDefault(),c(!0);try{let t=(0,a.createClient)(),{error:r}=await t.from("testimonials").update({content:u.content,author:u.author,status:u.status,sort_order:parseInt(u.sort_order)}).eq("id",d);if(r)throw r;alert("更新成功！"),e.push("/admin/testimonials")}catch(e){alert("更新失败："+(e instanceof Error?e.message:"未知错误"))}finally{c(!1)}};return n?(0,t.jsxs)("div",{className:"flex justify-center items-center py-20",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500"}),(0,t.jsx)("span",{className:"ml-4 text-gray-400",children:"加载中..."})]}):(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"编辑评语"}),(0,t.jsx)(l.default,{href:"/admin/testimonials",className:"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"返回列表"})]}),(0,t.jsxs)("form",{onSubmit:m,className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["评语内容 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("textarea",{value:u.content,onChange:e=>g({...u,content:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:6,required:!0}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"建议字数：50-200字"})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["评价人 ",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"text",value:u.author,onChange:e=>g({...u,author:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"状态"}),(0,t.jsxs)("select",{value:u.status,onChange:e=>g({...u,status:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,t.jsx)("option",{value:"已发布",children:"已发布"}),(0,t.jsx)("option",{value:"草稿",children:"草稿"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"排序顺序"}),(0,t.jsx)("input",{type:"number",value:u.sort_order,onChange:e=>g({...u,sort_order:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",min:"0"}),(0,t.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"数字越小越靠前"})]}),(0,t.jsxs)("div",{className:"pt-6 border-t border-gray-200 dark:border-gray-700",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"预览效果："}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-blue-50 dark:from-gray-700 dark:to-gray-600 rounded-lg p-6",children:[(0,t.jsxs)("p",{className:"text-gray-700 dark:text-gray-300 italic mb-4",children:['"',u.content,'"']}),(0,t.jsxs)("p",{className:"text-sm font-semibold text-gray-800 dark:text-white",children:["— ",u.author]})]})]}),(0,t.jsxs)("div",{className:"flex gap-4",children:[(0,t.jsx)("button",{type:"submit",disabled:i,className:"flex-1 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:i?"保存中...":"保存"}),(0,t.jsx)(l.default,{href:"/admin/testimonials",className:"px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition text-center",children:"取消"})]})]})]})}e.s(["default",()=>d,"runtime",0,"edge"])}]);