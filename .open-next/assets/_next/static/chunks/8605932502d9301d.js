(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,47312,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(20755),s=e.i(18566),l=e.i(22016),n=e.i(11152);function d(){let e=(0,s.useRouter)(),[d,i]=(0,t.useState)(!1),[o,c]=(0,t.useState)([]),[g,u]=(0,t.useState)(""),[x,m]=(0,t.useState)({customer_name:"",service_name:"",achievement:"",comment:"",rating:"5",status:"已发布",sort_order:"0"}),h=()=>{g.trim()&&(c([...o,g.trim()]),u(""))},p=async r=>{r.preventDefault(),i(!0);try{let r=(0,a.createClient)(),{error:t}=await r.from("cases").insert([{customer_name:x.customer_name,service_name:x.service_name,achievement:x.achievement,comment:x.comment,rating:parseInt(x.rating),highlights:o,status:x.status,sort_order:parseInt(x.sort_order)}]);if(t)throw t;alert("添加成功！"),e.push("/admin/cases")}catch(e){alert("添加失败："+(e instanceof Error?e.message:"未知错误"))}finally{i(!1)}};return(0,r.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white",children:"添加案例"}),(0,r.jsx)(l.default,{href:"/admin/cases",className:"text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"返回列表"})]}),(0,r.jsxs)("form",{onSubmit:p,className:"bg-white dark:bg-gray-800 rounded-lg shadow p-6 space-y-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["客户名称 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",value:x.customer_name,onChange:e=>m({...x,customer_name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"例如：张先生",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["服务名称 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("input",{type:"text",value:x.service_name,onChange:e=>m({...x,service_name:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"例如：赌约单",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["成果描述 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("textarea",{value:x.achievement,onChange:e=>m({...x,achievement:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"描述取得的成果...",rows:3,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["客户评价 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)("textarea",{value:x.comment,onChange:e=>m({...x,comment:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"客户对服务的评价...",rows:4,required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["评分 ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)("select",{value:x.rating,onChange:e=>m({...x,rating:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",required:!0,children:[(0,r.jsx)("option",{value:"5",children:"⭐⭐⭐⭐⭐ (5分)"}),(0,r.jsx)("option",{value:"4",children:"⭐⭐⭐⭐ (4分)"}),(0,r.jsx)("option",{value:"3",children:"⭐⭐⭐ (3分)"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"亮点标签"}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)("input",{type:"text",value:g,onChange:e=>u(e.target.value),onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),h()),className:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"输入亮点后按回车或点击添加"}),(0,r.jsx)("button",{type:"button",onClick:h,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition",children:(0,r.jsx)(n.FaPlus,{})})]}),o.length>0&&(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:o.map((e,t)=>(0,r.jsxs)("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200 rounded-full",children:[e,(0,r.jsx)("button",{type:"button",onClick:()=>{c(o.filter((e,r)=>r!==t))},className:"hover:text-red-500",children:(0,r.jsx)(n.FaTimes,{})})]},t))})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"状态"}),(0,r.jsxs)("select",{value:x.status,onChange:e=>m({...x,status:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[(0,r.jsx)("option",{value:"已发布",children:"已发布"}),(0,r.jsx)("option",{value:"草稿",children:"草稿"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"排序顺序"}),(0,r.jsx)("input",{type:"number",value:x.sort_order,onChange:e=>m({...x,sort_order:e.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"0",min:"0"}),(0,r.jsx)("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:"数字越小越靠前"})]}),(0,r.jsxs)("div",{className:"flex gap-4",children:[(0,r.jsx)("button",{type:"submit",disabled:d,className:"flex-1 px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition disabled:opacity-50 disabled:cursor-not-allowed",children:d?"保存中...":"保存"}),(0,r.jsx)(l.default,{href:"/admin/cases",className:"px-6 py-3 bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition text-center",children:"取消"})]})]})]})}e.s(["default",()=>d,"runtime",0,"edge"])}]);